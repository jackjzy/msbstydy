<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.FfwySpecificationMapper">

    <resultMap type="FfwySpecification" id="FfwySpecificationResult">
        <result property="specificationId" column="specification_id"/>
        <result property="specificationName" column="specification_name"/>
        <result property="parentid" column="parentId"/>
        <result property="productId" column="product_id"/>
        <result property="valueSelect" column="value_select"/>
        <result property="searchType" column="search_type"/>
        <result property="specType" column="spec_type"/>
        <result property="enable" column="enable"/>
        <result property="catelogId" column="catelog_id"/>
    </resultMap>

    <sql id="selectFfwySpecificationVo">
        select specification_id, specification_name, parentId, product_id, value_select,
        search_type, spec_type, enable, catelog_id from ffwy_specification
    </sql>

    <select id="selectSpecificationNameAndProductId" resultMap="FfwySpecificationResult">
        <include refid="selectFfwySpecificationVo"/>
        <where>
            <if test="specificationName != null  and specificationName != ''">and specification_name =
                #{specificationName}
            </if>
            <if test="productId != null ">and product_id = #{productId} and enable = 1 </if>
        </where>

    </select>

    <select id="selectFfwySpecificationList" parameterType="FfwySpecification" resultMap="FfwySpecificationResult">
        <include refid="selectFfwySpecificationVo"/>
        <where>
            <if test="specificationName != null  and specificationName != ''">and specification_name like concat('%',
                #{specificationName}, '%')
            </if>
            <if test="parentid != null  and parentid != ''">and parentId = #{parentid}</if>
            <if test="productId != null ">and product_id = #{productId}</if>
            <if test="valueSelect != null  and valueSelect != ''">and value_select like concat('%',
                #{valueSelect}, '%')</if>
            <if test="searchType != null ">and search_type = #{searchType}</if>
            <if test="specType != null ">and spec_type = #{specType}</if>
            <if test="enable != null ">and enable = #{enable}</if>
            <if test="catelogId != null ">and catelog_id = #{catelogId}</if>
        </where>
    </select>

    <select id="selectFfwySpecificationById" parameterType="Integer" resultMap="FfwySpecificationResult">
        <include refid="selectFfwySpecificationVo"/>
        where specification_id = #{specificationId} and enable = 1
    </select>

    <select id="selectFfwySpecificationByproductId" parameterType="Long" resultMap="FfwySpecificationResult">
        <include refid="selectFfwySpecificationVo"/>
        where product_id = #{productId} and enable = 1
    </select>

    <insert id="insertFfwySpecification" parameterType="FfwySpecification" useGeneratedKeys="true"
            keyProperty="specificationId">
        insert into ffwy_specification
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="specificationName != null and specificationName != ''">specification_name,</if>
            <if test="parentid != null">parentId,</if>
            <if test="productId != null">product_id,</if>
            <if test="valueSelect != null">value_select,</if>
            <if test="searchType != null">search_type,</if>
            <if test="specType != null">spec_type,</if>
            <if test="enable != null">enable,</if>
            <if test="catelogId != null">catelog_id,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="specificationName != null and specificationName != ''">#{specificationName},</if>
            <if test="parentid != null">#{parentid},</if>
            <if test="productId != null">#{productId},</if>
            <if test="valueSelect != null">#{valueSelect},</if>
            <if test="searchType != null">#{searchType},</if>
            <if test="specType != null">#{specType},</if>
            <if test="enable != null">#{enable},</if>
            <if test="catelogId != null">#{catelogId},</if>
        </trim>
    </insert>

    <update id="updateFfwySpecification" parameterType="FfwySpecification">
        update ffwy_specification
        <trim prefix="SET" suffixOverrides=",">
            <if test="specificationName != null and specificationName != ''">specification_name =
                #{specificationName},
            </if>
            <if test="parentid != null">parentId = #{parentid},</if>
            <if test="productId != null">product_id = #{productId},</if>
            <if test="valueSelect != null">value_select = #{valueSelect},</if>
            <if test="searchType != null">search_type = #{searchType},</if>
            <if test="specType != null">spec_type = #{specType},</if>
            <if test="enable != null">enable = #{enable},</if>
            <if test="catelogId != null">catelog_id = #{catelogId},</if>
        </trim>
        <where>
            <if test="specificationId != null "> and specification_id = #{specificationId}</if>
            <if test="productId != null "> and product_id = #{productId}</if>
        </where>
    </update>

    <delete id="deleteFfwySpecificationById" parameterType="Integer">
        delete from ffwy_specification where specification_id = #{specificationId}
    </delete>

    <delete id="deleteFfwySpecificationByIds" parameterType="String">
        delete from ffwy_specification where specification_id in
        <foreach item="specificationId" collection="array" open="(" separator="," close=")">
            #{specificationId}
        </foreach>
    </delete>

    <select id="selectByspecificationid" parameterType="Long" resultMap="FfwySpecificationResult">
        SELECT
        value_select
        FROM
        `ffwy_specification`
        <where>
            parentId = #{parentId}
        </where>
    </select>
</mapper>