<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.FfwyPaymentHistoryMapper">
    
    <resultMap type="PaymentHistoryVo" id="FfwyVideoResult">
        <result property="money"    column="money" />
        <result property="paymentName"    column="payment_name" />
        <result property="paymentTime"    column="payment_time" />
        <result property="patmentType"    column="patment_type" />
    </resultMap>
    
    <select id="selectOrderpaymentAll" parameterType="PaymentHistoryVo" resultMap="FfwyVideoResult">
    SELECT
	t1.money,
	t1.product_name AS payment_name,
	t1.payment_time,
	t2.patment_type
FROM
	ffwy_order t1,
	ffwy_payment t2
<where>
	t1.user_id = #{userId}
	AND t1.payment_id = t2.payment_id
	AND t1.status_id = ${statusId}
</where>
UNION ALL
SELECT
	t1.reality_money AS money,
	t1.combomeal_name payment_name,
	t1.pay_time AS payment_time,
	t2.patment_type
FROM
	ffwy_order_combomeal t1,
	ffwy_payment t2
<where>
	t1.user_id = #{userId}
	AND t1.pay_id = t2.payment_id
	AND t1.order_status = ${orderStatus}
</where>
    </select>
</mapper>